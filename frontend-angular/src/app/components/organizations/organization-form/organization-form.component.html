<div class="form-container">
  <div class="form-header">
    <button class="btn-secondary back-btn" (click)="cancel()">
      <span class="material-icons">arrow_back</span>
      Volver
    </button>
    <h1>{{ isEditMode ? 'Editar Organización' : 'Nueva Organización' }}</h1>
    <p>{{ isEditMode ? 'Modifica los datos de la organización' : 'Complete los datos para crear una nueva organización' }}</p>
  </div>

  <form [formGroup]="organizationForm" (ngSubmit)="onSubmit()" class="organization-form">
    
    <div class="form-section">
      <h3>Información de la Organización</h3>
      
      <div class="form-group">
        <label for="nit">NIT *</label>
        <input 
          type="text" 
          id="nit" 
          formControlName="nit" 
          [readonly]="isEditMode"
          placeholder="Ingrese el NIT de la organización (Solo números)"
          class="form-control">
        <div *ngIf="organizationForm.get('nit')?.invalid && organizationForm.get('nit')?.touched" class="error-message">
          El NIT es requerido
        </div>
      </div>

      <div class="form-group">
        <label for="nombre">Nombre de la Organización *</label>
        <input 
          type="text" 
          id="nombre" 
          formControlName="nombre" 
          placeholder="Ingrese el nombre de la organización"
          class="form-control">
        <div *ngIf="organizationForm.get('nombre')?.invalid && organizationForm.get('nombre')?.touched" class="error-message">
          El nombre es requerido
        </div>
      </div>

      <div class="form-group">
        <label for="descripcion">Descripción</label>
        <textarea 
          id="descripcion" 
          formControlName="descripcion" 
          rows="4"
          placeholder="Describa la organización, su misión y objetivos..."
          class="form-control"></textarea>
      </div>
    </div>

    <div class="form-section">
      <h3>Información del Inscriptor</h3>
      
      <div class="form-group">
        <label for="nombreInscriptor">Nombre del Inscriptor *</label>
        <input 
          type="text" 
          id="nombreInscriptor" 
          formControlName="nombreInscriptor" 
          placeholder="Nombre completo de la persona que registra"
          class="form-control">
        <div *ngIf="organizationForm.get('nombreInscriptor')?.invalid && organizationForm.get('nombreInscriptor')?.touched" class="error-message">
          El nombre del inscriptor es requerido
        </div>
      </div>

      <div class="form-group">
        <label for="rol">Rol/Cargo *</label>
        <input 
          type="text" 
          id="rol" 
          formControlName="rol" 
          placeholder="Director, Administrador, Representante Legal"
          class="form-control">
        <div *ngIf="organizationForm.get('rol')?.invalid && organizationForm.get('rol')?.touched" class="error-message">
          El rol es requerido
        </div>
      </div>

      <div class="form-group">
        <label for="correo">Correo Electrónico *</label>
        <input 
          type="email" 
          id="correo" 
          formControlName="correo" 
          placeholder="correo@ejemplo.com"
          class="form-control">
        <div *ngIf="organizationForm.get('correo')?.invalid && organizationForm.get('correo')?.touched" class="error-message">
          <span *ngIf="organizationForm.get('correo')?.errors?.['required']">El correo es requerido</span>
          <span *ngIf="organizationForm.get('correo')?.errors?.['email']">Ingresa un correo válido</span>
        </div>
      </div>

      <div class="form-group">
        <label for="contraseña">Contraseña *</label>
        <input 
          type="password" 
          id="contraseña" 
          formControlName="contraseña" 
          placeholder="Mínimo 6 caracteres"
          class="form-control">
        <div *ngIf="organizationForm.get('contraseña')?.invalid && organizationForm.get('contraseña')?.touched" class="error-message">
          <span *ngIf="organizationForm.get('contraseña')?.errors?.['required']">La contraseña es requerida</span>
          <span *ngIf="organizationForm.get('contraseña')?.errors?.['minlength']">La contraseña debe tener al menos 6 caracteres</span>
        </div>
      </div>
    </div>

    <div class="form-section">
      <h3>Logo de la Organización</h3>
      
      <div class="upload-container">
        <div class="logo-preview" *ngIf="previewUrl">
          <img [src]="previewUrl" alt="Preview del logo" class="preview-image">
          <button type="button" class="btn-remove" (click)="removeImage()">
            <span class="material-icons">delete</span>
          </button>
        </div>

        <div class="upload-area" *ngIf="!previewUrl">
          <input 
            type="file" 
            id="logoFile" 
            (change)="onFileSelected($event)"
            accept="image/jpeg, image/png, image/gif, image/webp"
            class="file-input"
            #fileInput>
          
          <div class="upload-placeholder" (click)="fileInput.click()">
            <span class="material-icons">cloud_upload</span>
            <h4>Subir Logo</h4>
            <p>Haz clic o arrastra una imagen aquí</p>
            <small>Formatos: JPEG, PNG, GIF, WebP (Máx. 5MB)</small>
          </div>
        </div>

        <div class="url-alternative">
          <label>O ingresa una URL del logo:</label>
          <input 
            type="url" 
            formControlName="logoUrl" 
            placeholder="https://ejemplo.com/logo.png"
            class="form-control">
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn-secondary" (click)="cancel()" [disabled]="loading || uploading">
        Cancelar
      </button>
      <button type="submit" class="btn-primary" [disabled]="organizationForm.invalid || loading || uploading">
        <span *ngIf="loading || uploading" class="spinner"></span>
        {{ (loading || uploading) ? 'Guardando...' : (isEditMode ? 'Actualizar' : 'Crear') }}
      </button>
    </div>
  </form>
</div>